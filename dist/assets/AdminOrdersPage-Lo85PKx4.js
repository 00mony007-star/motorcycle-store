import{bb as m,r as u,j as a,bc as f}from"./vendor-DcRwrwk9.js";import{l as g,f as r,u as S,C as b,d as C,e as T,k as v,h as w,B as y,g as D}from"./index-BEUX0Z6D.js";import{T as A,a as F,b as p,c,d as $,e as d}from"./Table-PsxMj63z.js";import{S as O,a as P,b as z,c as E,d as o}from"./Select-kEkG80sN.js";function I(i){const t=new m;let e=20;t.setFontSize(22),t.text("Invoice",105,e,{align:"center"}),e+=10,t.setFontSize(12),t.text(`Order #: ${i.number}`,20,e),t.text(`Date: ${g(new Date(i.createdAt))}`,180,e,{align:"right"}),e+=10,t.setFontSize(10),t.text("Ship To:",20,e);const n=i.shippingAddress;t.text(`${n.fullName}`,20,e+5),t.text(`${n.line1}`,20,e+10),n.line2&&t.text(`${n.line2}`,20,e+15),t.text(`${n.city}, ${n.state} ${n.postalCode}`,20,e+20),e+=30,t.setDrawColor(0),t.setFillColor(230,230,230),t.rect(20,e,170,7,"F"),t.text("Item",22,e+5),t.text("Qty",130,e+5),t.text("Price",150,e+5),t.text("Total",180,e+5,{align:"right"}),e+=10,i.items.forEach(l=>{t.text(l.productSnapshot.title,22,e),t.text(l.quantity.toString(),130,e),t.text(r(l.price),150,e),t.text(r(l.price*l.quantity),180,e,{align:"right"}),e+=7}),e+=5,t.line(130,e,190,e),e+=7,t.text("Subtotal:",130,e),t.text(r(i.subtotal),180,e,{align:"right"}),e+=7,t.text("Shipping:",130,e),t.text(r(i.shipping),180,e,{align:"right"}),e+=7,t.text("Tax:",130,e),t.text(r(i.tax),180,e,{align:"right"}),e+=7,t.setFont("helvetica","bold"),t.text("Total:",130,e),t.text(r(i.total),180,e,{align:"right"}),t.setFont("helvetica","normal"),t.setFontSize(10),t.text("Thank you for your business!",105,e+20,{align:"center"}),t.save(`Invoice-${i.number}.pdf`)}const j=D();function V(){const[i,t]=u.useState([]),{toast:e}=S(),n=async()=>{const s=await j.orders.list();t(s.sort((x,h)=>new Date(h.createdAt).getTime()-new Date(x.createdAt).getTime()))};u.useEffect(()=>{n()},[]);const l=async(s,x)=>{try{await j.orders.update(s,{status:x}),e({title:"Order status updated"}),n()}catch{e({variant:"destructive",title:"Failed to update status"})}};return a.jsxs(b,{children:[a.jsxs(C,{children:[a.jsx(T,{children:"Orders"}),a.jsx(v,{children:"View and manage all customer orders."})]}),a.jsx(w,{children:a.jsxs(A,{children:[a.jsx(F,{children:a.jsxs(p,{children:[a.jsx(c,{children:"Order #"}),a.jsx(c,{children:"Date"}),a.jsx(c,{children:"Customer"}),a.jsx(c,{children:"Total"}),a.jsx(c,{children:"Status"}),a.jsx(c,{children:"Actions"})]})}),a.jsx($,{children:i.map(s=>a.jsxs(p,{children:[a.jsx(d,{className:"font-medium",children:s.number}),a.jsx(d,{children:g(new Date(s.createdAt))}),a.jsx(d,{children:s.shippingAddress.fullName}),a.jsx(d,{children:r(s.total)}),a.jsx(d,{children:a.jsxs(O,{value:s.status,onValueChange:x=>l(s.id,x),children:[a.jsx(P,{className:"w-[120px]",children:a.jsx(z,{})}),a.jsxs(E,{children:[a.jsx(o,{value:"pending",children:"Pending"}),a.jsx(o,{value:"paid",children:"Paid"}),a.jsx(o,{value:"shipped",children:"Shipped"}),a.jsx(o,{value:"delivered",children:"Delivered"}),a.jsx(o,{value:"canceled",children:"Canceled"})]})]})}),a.jsx(d,{children:a.jsx(y,{variant:"outline",size:"icon",onClick:()=>I(s),children:a.jsx(f,{className:"h-4 w-4"})})})]},s.id))})]})})]})}export{V as AdminOrdersPage};
