import{r as i,j as e,T}from"./vendor-DcRwrwk9.js";import{u as v,C as l,d as h,e as x,k as w,h as g,B as j,I as b,g as N}from"./index-BEUX0Z6D.js";import{T as A,a as S,b as m,c,d as B,e as n}from"./Table-PsxMj63z.js";const o=N();function k(){const[u,C]=i.useState([]),[t,d]=i.useState(""),{toast:s}=v(),r=async()=>{C(await o.categories.list())};i.useEffect(()=>{r()},[]);const y=async a=>{if(a.preventDefault(),!!t.trim())try{await o.categories.create({name:t}),s({title:"Category created"}),d(""),r()}catch{s({variant:"destructive",title:"Failed to create category"})}},p=async a=>{if(window.confirm("Are you sure? This may affect products in this category."))try{await o.categories.remove(a),s({title:"Category deleted"}),r()}catch{s({variant:"destructive",title:"Failed to delete category"})}};return e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(l,{children:[e.jsxs(h,{children:[e.jsx(x,{children:"Categories"}),e.jsx(w,{children:"Manage your product categories."})]}),e.jsx(g,{children:e.jsxs(A,{children:[e.jsx(S,{children:e.jsxs(m,{children:[e.jsx(c,{children:"Name"}),e.jsx(c,{children:"Slug"}),e.jsx(c,{children:"Actions"})]})}),e.jsx(B,{children:u.map(a=>e.jsxs(m,{children:[e.jsx(n,{children:a.name}),e.jsx(n,{children:a.slug}),e.jsx(n,{children:e.jsx(j,{variant:"ghost",size:"icon",onClick:()=>p(a.id),children:e.jsx(T,{className:"h-4 w-4 text-destructive"})})})]},a.id))})]})})]}),e.jsxs(l,{children:[e.jsx(h,{children:e.jsx(x,{children:"Add New Category"})}),e.jsx(g,{children:e.jsxs("form",{onSubmit:y,className:"flex space-x-2",children:[e.jsx(b,{placeholder:"New category name",value:t,onChange:a=>d(a.target.value)}),e.jsx(j,{type:"submit",children:"Add"})]})})]})]})}export{k as AdminCategoriesPage};
