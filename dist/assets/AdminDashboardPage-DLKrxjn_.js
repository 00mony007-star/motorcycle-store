import{j as e,aR as p,aS as g,aT as v,aU as y,aV as N,aW as C,aX as b,r as h,x as w,aY as S,d as D,aZ as O,a_ as A}from"./vendor-DcRwrwk9.js";import{C as u,d as m,e as f,h as j,f as c,g as k}from"./index-BEUX0Z6D.js";function d({title:a,value:i,icon:r,description:n}){return e.jsxs(u,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:a}),r]}),e.jsxs(j,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i}),n&&e.jsx("p",{className:"text-xs text-muted-foreground",children:n})]})]})}function T({orders:a}){const i=a.filter(s=>s.status==="delivered"||s.status==="shipped").reduce((s,t)=>{const o=new Date(t.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"});return s[o]=(s[o]||0)+t.total,s},{}),r=Object.entries(i).sort(([s],[t])=>new Date(s).getTime()-new Date(t).getTime()).map(([s,t])=>({date:s,revenue:Math.round(t*100)/100,formattedRevenue:c(t)})),n=({active:s,payload:t,label:o})=>s&&t&&t.length?e.jsxs("div",{className:"bg-card border border-border rounded-lg p-3 shadow-lg",children:[e.jsx("p",{className:"font-medium",children:o}),e.jsxs("p",{className:"text-primary",children:["Sales: ",c(t[0].value)]})]}):null;return r.length===0?e.jsx("div",{className:"h-96 flex items-center justify-center text-muted-foreground",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:"ðŸ“Š"}),e.jsx("p",{children:"No sales data available"})]})}):e.jsx("div",{className:"h-96",children:e.jsx(p,{width:"100%",height:"100%",children:e.jsxs(g,{data:r,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"salesGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"hsl(var(--primary))",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"hsl(var(--primary))",stopOpacity:0})]})}),e.jsx(v,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(y,{dataKey:"date",stroke:"hsl(var(--muted-foreground))",fontSize:12}),e.jsx(N,{stroke:"hsl(var(--muted-foreground))",fontSize:12,tickFormatter:s=>`$${s}`}),e.jsx(C,{content:e.jsx(n,{})}),e.jsx(b,{type:"monotone",dataKey:"revenue",stroke:"hsl(var(--primary))",strokeWidth:2,fill:"url(#salesGradient)"})]})})})}const R=k();function E(){const[a,i]=h.useState([]),[r,n]=h.useState(!0);if(h.useEffect(()=>{async function x(){try{const l=await R.orders.list();i(l)}catch(l){console.error("Failed to fetch dashboard data:",l)}finally{n(!1)}}x()},[]),r)return e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(w,{className:"h-8 w-8 animate-spin"})});const s=a.reduce((x,l)=>x+l.total,0),t=a.length,o=t>0?s/t:0;return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Dashboard"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(d,{title:"Total Revenue",value:c(s),icon:e.jsx(S,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(d,{title:"Total Orders",value:t,icon:e.jsx(D,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(d,{title:"Avg. Order Value",value:c(o),icon:e.jsx(O,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(d,{title:"Customers",value:"2",description:"Mock data",icon:e.jsx(A,{className:"h-4 w-4 text-muted-foreground"})})]}),e.jsxs(u,{children:[e.jsx(m,{children:e.jsx(f,{children:"Sales Overview"})}),e.jsx(j,{children:e.jsx(T,{orders:a})})]})]})}export{E as AdminDashboardPage};
