import{aw as H,r as u,j as e,ax as O,ay as D,az as V,g as W,u as _,aA as J,aB as K,aC as Q,aD as M,z as U,aE as X,aF as Z,aG as c}from"./vendor-DcRwrwk9.js";import{c as b,a as ee,j as se,u as ae,C as j,d as g,e as f,h as y,I as i,f as o,B as R,g as te}from"./index-BEUX0Z6D.js";import{L as l}from"./Label-CEq3WBdJ.js";import{S as E}from"./Separator-CW2lLDLq.js";const ie=H,z=u.forwardRef(({className:s,...m},t)=>e.jsx(O,{ref:t,className:b("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...m}));z.displayName=O.displayName;const h=u.forwardRef(({className:s,...m},t)=>e.jsx(D,{ref:t,className:b("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...m}));h.displayName=D.displayName;const p=u.forwardRef(({className:s,...m},t)=>e.jsx(V,{ref:t,className:b("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...m}));p.displayName=V.displayName;const le=te(),re=Z({fullName:c().min(2,"Full name is required"),email:c().email("Invalid email address"),phone:c().min(10,"Invalid phone number"),line1:c().min(5,"Address line is required"),line2:c().optional(),city:c().min(2,"City is required"),state:c().min(2,"State is required"),postalCode:c().min(5,"Invalid postal code"),country:c().min(2,"Country is required")});function me(){var P,k,F,S,T,A,I,q;const{cart:s,clearCart:m}=ee(),{user:t}=se(),N=W(),{toast:v}=ae(),{t:a}=_(),[w,C]=u.useState(!1),[B,Y]=u.useState("card"),{register:r,handleSubmit:$,formState:{errors:d}}=J({resolver:X(re),defaultValues:{fullName:(t==null?void 0:t.name)||"",email:(t==null?void 0:t.email)||"",country:"Saudi Arabia"}}),G=async n=>{if(s){C(!0);try{const x={userId:t==null?void 0:t.id,items:s.items,subtotal:s.subtotal,shipping:s.shipping,tax:s.tax,total:s.total,currency:"SAR",payment:B,shippingAddress:{id:"",...n},billingAddress:{id:"",...n}},L=await le.orders.create(x);v({title:"Order Placed!",description:`Your order #${L.number} has been confirmed.`}),m(),N(`/order/${L.id}`)}catch{v({variant:"destructive",title:"Order Failed",description:"There was a problem placing your order."}),C(!1)}}};return!s||s.items.length===0?e.jsxs("div",{className:"container mx-auto px-4 py-20 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:a("cartPage.emptyTitle")}),e.jsx("p",{className:"text-muted-foreground",children:setTimeout(()=>N("/"),2e3)})]}):e.jsxs("form",{onSubmit:$(G),className:"container mx-auto px-4 py-12",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-center",children:a("checkoutPage.title")}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[e.jsx("div",{children:e.jsxs(j,{children:[e.jsx(g,{children:e.jsx(f,{children:a("checkoutPage.shippingInfo")})}),e.jsxs(y,{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx(l,{htmlFor:"fullName",children:"Full Name"}),e.jsx(i,{id:"fullName",...r("fullName")}),e.jsx("p",{className:"text-destructive text-xs mt-1",children:(P=d.fullName)==null?void 0:P.message})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(l,{htmlFor:"email",children:"Email"}),e.jsx(i,{id:"email",type:"email",...r("email")}),e.jsx("p",{className:"text-destructive text-xs mt-1",children:(k=d.email)==null?void 0:k.message})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(l,{htmlFor:"phone",children:"Phone"}),e.jsx(i,{id:"phone",...r("phone")}),e.jsx("p",{className:"text-destructive text-xs mt-1",children:(F=d.phone)==null?void 0:F.message})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(l,{htmlFor:"line1",children:"Address Line 1"}),e.jsx(i,{id:"line1",...r("line1")}),e.jsx("p",{className:"text-destructive text-xs mt-1",children:(S=d.line1)==null?void 0:S.message})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx(l,{htmlFor:"line2",children:"Address Line 2 (Optional)"}),e.jsx(i,{id:"line2",...r("line2")})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"city",children:"City"}),e.jsx(i,{id:"city",...r("city")}),e.jsx("p",{className:"text-destructive text-xs mt-1",children:(T=d.city)==null?void 0:T.message})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"state",children:"State / Province"}),e.jsx(i,{id:"state",...r("state")}),e.jsx("p",{className:"text-destructive text-xs mt-1",children:(A=d.state)==null?void 0:A.message})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"postalCode",children:"Postal Code"}),e.jsx(i,{id:"postalCode",...r("postalCode")}),e.jsx("p",{className:"text-destructive text-xs mt-1",children:(I=d.postalCode)==null?void 0:I.message})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"country",children:"Country"}),e.jsx(i,{id:"country",...r("country")}),e.jsx("p",{className:"text-destructive text-xs mt-1",children:(q=d.country)==null?void 0:q.message})]})]})]})}),e.jsxs("div",{children:[e.jsxs(j,{className:"mb-8",children:[e.jsx(g,{children:e.jsx(f,{children:a("checkoutPage.paymentMethod")})}),e.jsx(y,{children:e.jsxs(ie,{defaultValue:"card",className:"w-full",onValueChange:Y,children:[e.jsxs(z,{className:"grid w-full grid-cols-4",children:[e.jsxs(h,{value:"card",children:[e.jsx(K,{className:"me-2 h-4 w-4"}),a("checkoutPage.payment.card")]}),e.jsxs(h,{value:"tabby",children:[e.jsx(Q,{className:"me-2 h-4 w-4"}),a("checkoutPage.payment.tabby")]}),e.jsxs(h,{value:"applepay",children:[e.jsx(M,{className:"me-2 h-5 w-5"}),a("checkoutPage.payment.applepay")]}),e.jsxs(h,{value:"cod",disabled:!0,children:[e.jsx(U,{className:"me-2 h-4 w-4"}),a("checkoutPage.payment.cod")]})]}),e.jsxs(p,{value:"card",className:"mt-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"cardNumber",children:"Card Number"}),e.jsx(i,{id:"cardNumber",placeholder:"**** **** **** ****"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"expiry",children:"Expiry Date"}),e.jsx(i,{id:"expiry",placeholder:"MM / YY"})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"cvc",children:"CVC"}),e.jsx(i,{id:"cvc",placeholder:"***"})]})]})]}),e.jsxs(p,{value:"tabby",className:"mt-4 text-center",children:[e.jsx("img",{src:"https://www.tabby.ai/images/logo.svg",alt:"Tabby",className:"h-8 mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a("checkoutPage.tabbyInfo")}),e.jsx("div",{className:"flex justify-around mt-4 text-xs",children:Array.from({length:4}).map((n,x)=>e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-bold",children:o(s.total/4)}),e.jsxs("p",{className:"text-muted-foreground",children:["Month ",x+1]})]},x))})]}),e.jsxs(p,{value:"applepay",className:"mt-4",children:[e.jsx("p",{className:"text-sm text-center text-muted-foreground mb-4",children:a("checkoutPage.applePayInfo")}),e.jsxs(R,{variant:"default",className:"w-full bg-black text-white hover:bg-gray-800 h-12 text-lg",disabled:!0,children:[e.jsx(M,{className:"me-2 h-6 w-6"})," Pay"]})]})]})})]}),e.jsxs(j,{children:[e.jsx(g,{children:e.jsx(f,{children:a("checkoutPage.orderSummary")})}),e.jsxs(y,{className:"space-y-2 text-sm",children:[s.items.map(n=>e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[n.productSnapshot.title," x ",n.quantity]}),e.jsx("span",{children:o(n.price*n.quantity)})]},n.id)),e.jsx(E,{}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:a("cartPage.subtotal")}),e.jsx("span",{children:o(s.subtotal)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:a("cartPage.shipping")}),e.jsx("span",{children:o(s.shipping)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:a("cartPage.tax")}),e.jsx("span",{children:o(s.tax)})]}),s.discount&&e.jsxs("div",{className:"flex justify-between text-green-500",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["-",o(s.discount)]})]}),e.jsx(E,{}),e.jsxs("div",{className:"flex justify-between font-bold text-base",children:[e.jsx("span",{children:a("cartPage.total")}),e.jsx("span",{children:o(s.total)})]})]})]}),e.jsx(R,{type:"submit",size:"lg",className:"w-full mt-8",disabled:w,children:w?a("checkoutPage.processing"):a("checkoutPage.placeOrder",{total:o(s.total)})})]})]})]})}export{me as CheckoutPage};
