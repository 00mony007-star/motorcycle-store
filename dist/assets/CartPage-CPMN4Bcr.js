import{g as N,r as f,j as e,L as y,M as w,P as b,X as i,av as S}from"./vendor-DcRwrwk9.js";import{a as k,u as I,B as t,C as l,f as n,d as z,e as E,h as T,I as q,i as P,g as A}from"./index-BEUX0Z6D.js";import{S as d}from"./Separator-CW2lLDLq.js";const B=A();function Q(){const{cart:a,updateItemQuantity:x,removeItem:p,applyCoupon:h,removeCoupon:u}=k(),m=N(),{toast:c}=I(),[r,j]=f.useState(""),o=(s,v)=>{x(s,v)},g=async()=>{if(r)try{const s=await B.coupons.getByCode(r);s&&s.active?(h(s),c({title:"Success",description:`Coupon "${s.code}" applied.`})):c({variant:"destructive",title:"Error",description:"Invalid or expired coupon code."})}catch{c({variant:"destructive",title:"Error",description:"Could not apply coupon."})}},C=()=>{u(),c({title:"Coupon removed"})};return!a||a.items.length===0?e.jsxs("div",{className:"container mx-auto px-4 py-20 text-center",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Your Cart is Empty"}),e.jsx("p",{className:"text-muted-foreground mb-8",children:"Looks like you haven't added anything to your cart yet."}),e.jsx(t,{asChild:!0,children:e.jsx(y,{to:"/category/all",children:"Start Shopping"})})]}):e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8",children:"Your Shopping Cart"}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-12",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:a.items.map(s=>e.jsxs(l,{className:"flex items-center p-4",children:[e.jsx("img",{src:s.productSnapshot.image,alt:s.productSnapshot.title,className:"w-24 h-24 object-cover rounded-md mr-4"}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("h3",{className:"font-semibold",children:s.productSnapshot.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.productSnapshot.variantInfo}),e.jsx("p",{className:"text-sm font-medium mt-1",children:n(s.price)})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center border rounded-md",children:[e.jsx(t,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>o(s.id,s.quantity-1),children:e.jsx(w,{className:"h-4 w-4"})}),e.jsx("span",{className:"w-8 text-center text-sm",children:s.quantity}),e.jsx(t,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>o(s.id,s.quantity+1),children:e.jsx(b,{className:"h-4 w-4"})})]}),e.jsx("p",{className:"font-semibold w-24 text-right",children:n(s.price*s.quantity)}),e.jsx(t,{variant:"ghost",size:"icon",onClick:()=>p(s.id),children:e.jsx(i,{className:"h-5 w-5"})})]})]},s.id))}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(l,{children:[e.jsx(z,{children:e.jsx(E,{children:"Order Summary"})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Subtotal"}),e.jsx("span",{children:n(a.subtotal)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Shipping"}),e.jsx("span",{children:a.shipping===0?"Free":n(a.shipping)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Tax (8%)"}),e.jsx("span",{children:n(a.tax)})]}),e.jsx(d,{}),a.couponCode?e.jsxs("div",{className:"flex justify-between items-center text-sm text-green-600 dark:text-green-400",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(S,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{children:['Coupon "',a.couponCode,'" applied']})]}),e.jsxs("span",{children:["-",n(a.discount||0)]}),e.jsx(t,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:C,children:e.jsx(i,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(q,{placeholder:"Coupon Code",value:r,onChange:s=>j(s.target.value.toUpperCase())}),e.jsx(t,{onClick:g,children:"Apply"})]}),e.jsx(d,{}),e.jsxs("div",{className:"flex justify-between font-bold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsx("span",{children:n(a.total)})]})]}),e.jsx(P,{children:e.jsx(t,{size:"lg",className:"w-full",onClick:()=>m("/checkout"),children:"Proceed to Checkout"})})]})})]})]})}export{Q as CartPage};
