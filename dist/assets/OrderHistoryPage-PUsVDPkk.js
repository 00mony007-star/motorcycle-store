import{r,j as e,x as c,a8 as g,L as d}from"./vendor-DcRwrwk9.js";import{j as N,C as l,d as o,e as v,k as w,h as x,l as C,b,f as L,B as h,g as A}from"./index-BEUX0Z6D.js";const D=A();function B(){const{user:t,isAuthenticated:m,isLoading:u}=N(),[i,j]=r.useState([]),[f,n]=r.useState(!0);return r.useEffect(()=>{async function s(){if(t){n(!0);try{const a=await D.orders.list(t.id);j(a.sort((p,y)=>new Date(y.createdAt).getTime()-new Date(p.createdAt).getTime()))}catch(a){console.error("Failed to fetch orders:",a)}finally{n(!1)}}}t&&s()},[t]),u?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(c,{className:"h-8 w-8 animate-spin"})}):m?e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs(l,{children:[e.jsxs(o,{children:[e.jsx(v,{children:"My Orders"}),e.jsx(w,{children:"Here is a list of your past orders."})]}),e.jsx(x,{children:f?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx(c,{className:"h-8 w-8 animate-spin"})}):i.length>0?e.jsx("div",{className:"space-y-4",children:i.map(s=>e.jsxs(l,{children:[e.jsxs(o,{className:"flex flex-row justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold",children:["Order #",s.number]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Placed on ",C(new Date(s.createdAt))]})]}),e.jsx(b,{variant:s.status==="delivered"?"default":"secondary",children:s.status})]}),e.jsx(x,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"font-bold",children:L(s.total)}),e.jsx(h,{asChild:!0,variant:"outline",size:"sm",children:e.jsx(d,{to:`/order/${s.id}`,children:"View Details"})})]})})]},s.id))}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("h3",{className:"text-xl font-semibold",children:"No orders yet"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"You haven't placed any orders with us."}),e.jsx(h,{asChild:!0,className:"mt-4",children:e.jsx(d,{to:"/category/all",children:"Start Shopping"})})]})})]})}):e.jsx(g,{to:"/login",replace:!0})}export{B as OrderHistoryPage};
