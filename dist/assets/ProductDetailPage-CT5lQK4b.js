import{ak as E,r as c,j as e,al as T,am as V,an as C,ao as B,ap as k,aq as D,x as O,L as q,d as H,H as z,ar as F,as as M}from"./vendor-DcRwrwk9.js";import{c as p,u as G,a as K,S as W,f as w,B as u,b as Y,P as J,g as Q}from"./index-BEUX0Z6D.js";const U=E,m=c.forwardRef(({className:i,...n},l)=>e.jsx(T,{ref:l,className:p("border-b",i),...n}));m.displayName="AccordionItem";const x=c.forwardRef(({className:i,children:n,...l},s)=>e.jsx(V,{className:"flex",children:e.jsxs(C,{ref:s,className:p("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",i),...l,children:[n,e.jsx(B,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));x.displayName=C.displayName;const h=c.forwardRef(({className:i,children:n,...l},s)=>e.jsx(k,{ref:s,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...l,children:e.jsx("div",{className:p("pb-4 pt-0",i),children:n})}));h.displayName=k.displayName;const b=Q();function _(){const{slug:i}=D(),{toast:n}=G(),l=K(t=>t.addItem),[s,S]=c.useState(null),[f,A]=c.useState([]),[P,j]=c.useState(!0),[g,N]=c.useState({}),[v,y]=c.useState("");c.useEffect(()=>{async function t(){var a;if(i){j(!0);try{const r=await b.products.getBySlug(i);if(S(r),r){y(r.images[0]);const o={};(a=r.variants)==null||a.forEach(d=>{o[d.name]=d.options[0]}),N(o);const $=await b.products.list({categoryId:r.category.id,limit:5});A($.filter(d=>d.id!==r.id).slice(0,4))}}catch(r){console.error("Failed to fetch product:",r)}finally{j(!1)}}}t()},[i]);const I=(t,a)=>{N(r=>({...r,[t]:a}))},R=()=>{var r,o;if(!s)return;const t=(o=(r=s.variants)==null?void 0:r[0])==null?void 0:o.name,a=t?{name:t,option:g[t]}:void 0;l(s,a),n({title:"Added to Cart",description:`${s.title} has been added to your cart.`})};if(P)return e.jsx("div",{className:"flex justify-center items-center h-[80vh]",children:e.jsx(O,{className:"h-12 w-12 animate-spin"})});if(!s)return e.jsx("div",{className:"text-center py-20",children:"Product not found."});const L=s.stock>0?s.stock<10?`Low stock (${s.stock} left)`:"In Stock":"Out of Stock";return e.jsxs("div",{className:"container mx-auto px-4 py-12 animate-fade-in",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-12",children:[e.jsxs("div",{children:[e.jsx("div",{className:"border rounded-lg overflow-hidden mb-4",children:e.jsx("img",{src:v,alt:s.title,className:"w-full h-auto object-cover aspect-square"})}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:s.images.map((t,a)=>e.jsx("button",{onClick:()=>y(t),className:`border rounded-md overflow-hidden ${v===t?"ring-2 ring-primary":""}`,children:e.jsx("img",{src:t,alt:`${s.title} thumbnail ${a+1}`,className:"w-full h-full object-cover aspect-square"})},a))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(q,{to:`/category/${s.category.slug}`,className:"text-sm text-muted-foreground hover:text-primary",children:s.category.name}),e.jsx("h1",{className:"text-3xl lg:text-4xl font-bold",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(W,{rating:s.rating}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.reviewCount," reviews"]})]})]}),e.jsxs("div",{className:"text-3xl font-bold flex items-center gap-4",children:[e.jsx("span",{children:w(s.price)}),s.compareAtPrice&&e.jsx("span",{className:"text-xl text-muted-foreground line-through",children:w(s.compareAtPrice)})]}),e.jsx("p",{className:"text-sm",children:s.shortDescription}),s.variants&&s.variants.length>0&&e.jsx("div",{className:"space-y-4",children:s.variants.map(t=>e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-2",children:t.name}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.options.map(a=>e.jsx(u,{variant:g[t.name]===a?"default":"outline",onClick:()=>I(t.name,a),children:a},a))})]},t.id))}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(Y,{variant:s.stock>0?"secondary":"destructive",children:L})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs(u,{size:"lg",className:"flex-1",onClick:R,disabled:s.stock===0,children:[e.jsx(H,{className:"mr-2 h-5 w-5"}),s.stock>0?"Add to Cart":"Out of Stock"]}),e.jsxs(u,{size:"lg",variant:"outline",className:"flex-1",children:[e.jsx(z,{className:"mr-2 h-5 w-5"}),"Add to Wishlist"]})]}),e.jsxs("div",{className:"border-t pt-6 space-y-4 text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(F,{className:"h-5 w-5 text-green-500 mr-2"}),e.jsx("span",{children:"Free shipping on orders over $100"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"h-5 w-5 text-blue-500 mr-2"}),e.jsx("span",{children:"DOT & ECE Certified for safety"})]})]}),e.jsxs(U,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(m,{value:"description",children:[e.jsx(x,{children:"Description"}),e.jsx(h,{className:"prose dark:prose-invert max-w-none",children:s.description})]}),e.jsxs(m,{value:"specs",children:[e.jsx(x,{children:"Specifications"}),e.jsx(h,{children:e.jsx("ul",{className:"list-disc list-inside space-y-1",children:s.specs&&Object.entries(s.specs).map(([t,a])=>e.jsxs("li",{children:[e.jsxs("strong",{children:[t,":"]})," ",a]},t))})})]}),e.jsxs(m,{value:"reviews",children:[e.jsxs(x,{children:["Reviews (",s.reviewCount,")"]}),e.jsx(h,{children:e.jsx("p",{children:"Customer reviews are coming soon."})})]})]})]})]}),f.length>0&&e.jsxs("div",{className:"mt-24",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-8",children:"You Might Also Like"}),e.jsx(J,{products:f})]})]})}export{_ as ProductDetailPage};
